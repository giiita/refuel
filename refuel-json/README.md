# refuel-json

```
libraryDependencies += "com.phylage" %% "refuel-json" % "1.0.0-RC3"
```

refuel-json automatically generates codec and supports JSON mutual conversion fast and easy.

## Usage

Generate any codec with CaseClassCodec or ConstCodec.<br/>
Both CaseClassCodec and ConstCodec are automatically generated up to the member's internal Codec.

```scala
class Test extends JsParser {
  // A and B codecs do not need to be declared
  jsonString.as(CaseClassCodec.from[C])
}

case class A(value: String)
case class B(a: A)
case class C(b: B)
```

However, you may want to change the lower codec when generating the upper codec.<br/>
In that case, if an implicit Codec exists in the implicit scope, it will be substituted.

```scala
case class A(value: String)
case class B(a: A)
case class C(b: B)
case class D(c: C)

implicit val B_CODEC: Codec[B] = ???

// In this case, B_CODEC is used internally.
jsonString.as(CaseClassCodec.from[D])
```

`CaseClassCodec.from[T]` generates a Codec only for classes with `apply` and `unapply/unapplySeq`.<br/>
Use ConstCodec if you do not have apply / unapply, such as trait or Factory function.<br/>
Codec is generated by explicitly passing json key name and `apply` / `unapply`.

```scala
trait A {
  val id: String
  val value: Int
}


// In this case, B_CODEC is used internally.
s"""{"id": "abcde", "value_number": 123}""".as(ConstCodec.from("id", "value_number")((a, b) => new A {
val id = a
val value = b
})(z => Some((z.id, z.value))))
```

Similarly, ConstCodec does not need to declare the inner class Codec.<br/>